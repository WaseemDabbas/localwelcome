.container
  .row.col-md-12
    h1 = @chapter.name

  .row.col-md-12
    h2 Users (#{@chapter.users.count})
    - if @chapter.users.any?
      table.table.table-striped
        thead
          tr
            th Name
            th Email address
            th Biography
            th Signed up on
        tbody
        - @chapter.subscriptions.newest.first(10).each do |subscription|
          tr
            - if subscription.user.name.blank?
              td
                | [Not set]
            - else
              td = subscription.user.name
            td = subscription.user.email
            - if subscription.user.bio.blank?
              td
                | [Not set]
            - else
              td = truncate subscription.user.bio, length: 80
            td = long_friendly_datetime subscription.created_at

      - if @chapter.users.count > 10
        p = link_to "See more &raquo;".html_safe, admin_chapter_users_path(@chapter)

  .row.col-md-12
      h2 Events (#{@chapter.events.count})
      .row
        .col-md-6
          h3 Published events (#{@chapter.events.published.count})

          - if @chapter.events.published.any?
            ul
              - @chapter.events.published.each do |event|
                li = link_to "#{short_friendly_date event.starts_at}: #{event.title}", admin_chapter_event_path(@chapter, event)
          - else
            p.system.info No published events yet.
        .col-md-6
          h3 Not-yet-published events (#{@chapter.events.unpublished.count})

          - if @chapter.events.unpublished.any?
            ul
              - @chapter.events.unpublished.each do |event|
                li = link_to "#{short_friendly_date event.starts_at}: #{event.title}", admin_chapter_event_path(@chapter, event)
          - else
            p.system.info No not-yet-published events yet.

  .row.col-md-12
    h2 Add new event
    = render partial: 'admin/events/form', locals: { chapter: @chapter, event: Event.new }
